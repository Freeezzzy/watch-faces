<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Abstraktes Watchface mit Lampe</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000; /* Schwarzer Hintergrund */
        }
        canvas {
            display: block;
        }
        #time {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Arial', sans-serif;
            font-size: 3rem;
            color: white; /* Weiße Uhrzeit */
            text-align: center;
            z-index: 10;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="time">00:00</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.18.0/matter.min.js"></script>
    <script>
        // Matter.js Setup
        const Engine = Matter.Engine,
              Render = Matter.Render,
              World = Matter.World,
              Bodies = Matter.Bodies,
              Body = Matter.Body;

        // Engine erstellen
        const engine = Engine.create();
        engine.gravity.y = 0; // Keine Schwerkraft (optional)

        // Renderer
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false,
                background: '#000000' // Schwarzer Hintergrund
            }
        });

        // "Lampe" als physikalisches Objekt (Kreis mit radialem Gradient)
        const lamp = Bodies.circle(
            window.innerWidth / 2,
            window.innerHeight / 2,
            100, {
                render: {
                    fillStyle: 'transparent',
                    strokeStyle: 'transparent'
                },
                isStatic: false,
                friction: 0.1,
                restitution: 0.5
            }
        );

        // Wände (damit die Lampe nicht verschwindet)
        const wallOptions = { isStatic: true, render: { visible: false } };
        const ground = Bodies.rectangle(window.innerWidth / 2, window.innerHeight, window.innerWidth, 10, wallOptions);
        const ceiling = Bodies.rectangle(window.innerWidth / 2, 0, window.innerWidth, 10, wallOptions);
        const leftWall = Bodies.rectangle(0, window.innerHeight / 2, 10, window.innerHeight, wallOptions);
        const rightWall = Bodies.rectangle(window.innerWidth, window.innerHeight / 2, 10, window.innerHeight, wallOptions);

        // Alles zur Welt hinzufügen
        World.add(engine.world, [lamp, ground, ceiling, leftWall, rightWall]);

        // Uhrzeit aktualisieren
        function updateTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('time').textContent = `${hours}:${minutes}`;
            requestAnimationFrame(updateTime);
        }
        updateTime();

        // Lampe bewegen (z. B. per Maus/Touch oder Beschleunigungssensor)
        window.addEventListener('mousemove', (e) => {
            Body.setPosition(lamp, { x: e.clientX, y: e.clientY });
        });

        // Für Smartwatches: Beschleunigungssensor nutzen
        if (window.DeviceMotionEvent) {
            window.addEventListener('devicemotion', (e) => {
                const x = (e.accelerationIncludingGravity.x || 0) * 10;
                const y = (e.accelerationIncludingGravity.y || 0) * 10;
                Body.applyForce(lamp, lamp.position, { x: x * 0.001, y: y * 0.001 });
            });
        }

        // Starte Engine & Renderer
        Engine.run(engine);
        Render.run(render);

        // Canvas nachträglich stylen (für den Lichteffekt)
        setTimeout(() => {
            const canvas = document.querySelector('canvas');
            canvas.style.background = 'radial-gradient(circle at ' +
                lamp.position.x + 'px ' + lamp.position.y + 'px, ' +
                'rgba(255, 255, 255, 0.2) 0%, ' + // Leichte Akzentfarbe (z. B. Blau: rgba(0, 100, 255, 0.2))
                'rgba(0, 0, 0, 1) 70%)'; // Ausblenden zu Schwarz
        }, 100);

        // Lampe verfolgen für den Gradienten
        Matter.Events.on(engine, 'afterUpdate', () => {
            const canvas = document.querySelector('canvas');
            canvas.style.background = 'radial-gradient(circle at ' +
                lamp.position.x + 'px ' + lamp.position.y + 'px, ' +
                'rgba(255, 255, 255, 0.3) 0%, ' + // Weißer Lichtkern
                'rgba(50, 50, 50, 0.5) 50%, ' + // Grauton (optional)
                'rgba(0, 0, 0, 1) 80%)'; // Schwarz
        });
    </script>
</body>
</html>